# –ñ—É—Ä–Ω–∞–ª –°–æ–±—ã—Ç–∏–π - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## –û–±–∑–æ—Ä

–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∂—É—Ä–Ω–∞–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏–π –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ. –ñ—É—Ä–Ω–∞–ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –≤—Å–µ –≤–∞–∂–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ —Å–∏—Å—Ç–µ–º–µ –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Ö –≤ Google Sheets.

## –ß—Ç–æ –±—ã–ª–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ

### 1. –¢–∏–ø—ã —Å–æ–±—ã—Ç–∏–π (`types.ts`)

–û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ —Ç–∏–ø—ã —Å–æ–±—ã—Ç–∏–π:
- **`employee_action`** - –î–µ–π—Å—Ç–≤–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ (—Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞, –∑–∞–∫—É–ø–∫–∏ –∏ —Ç.–¥.)
- **`receipt_operation`** - –û–ø–µ—Ä–∞—Ü–∏–∏ —Å —á–µ–∫–∞–º–∏ (—Å–æ–∑–¥–∞–Ω–∏–µ, –ø–µ—á–∞—Ç—å, –æ—Ç–º–µ–Ω–∞)
- **`system_event`** - –°–∏—Å—Ç–µ–º–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è (–≤—Ö–æ–¥, –≤—ã—Ö–æ–¥, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
- **`data_change`** - –ò–∑–º–µ–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞, –∫–ª–∏–µ–Ω—Ç–∞, —Ä–∞—Å—Ö–æ–¥—ã)

### 2. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å `JournalEvent`

```typescript
interface JournalEvent {
  id: string;
  date: string;
  type: JournalEventType;
  
  // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–µ
  employeeId?: string;
  employeeName?: string;
  employeeEmail?: string;
  
  // –î–µ—Ç–∞–ª–∏ —Å–æ–±—ã—Ç–∏—è
  action: string;
  description: string;
  module?: string;
  
  // –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
  relatedType?: 'order' | 'product' | 'client' | 'expense' | 'purchase' | 'transaction';
  relatedId?: string;
  
  // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —á–µ–∫–æ–≤
  receiptDetails?: {
    orderId: string;
    customerName: string;
    totalAmount: number;
    itemsCount: number;
    paymentMethod: string;
    operation: 'printed' | 'cancelled' | 'edited' | 'created';
  };
  
  metadata?: Record<string, any>;
}
```

### 3. –°–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Google Sheets (`sheetsService.ts`)

–î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã:
- **`getJournalEvents(accessToken)`** - –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ–±—ã—Ç–∏–π –∏–∑ —Ç–∞–±–ª–∏—Ü—ã
- **`addJournalEvent(accessToken, event)`** - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å–æ–±—ã—Ç–∏—è

–°–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤–∞—è –≤–∫–ª–∞–¥–∫–∞ **"Journal"** –≤ Google Sheets —Å –∫–æ–ª–æ–Ω–∫–∞–º–∏:
- ID, Date, Type, Employee ID, Employee Name, Employee Email
- Action, Description, Module, Related Type, Related ID
- Receipt Details, Metadata

### 4. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `JournalEventsView`

–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∂—É—Ä–Ω–∞–ª–∞ —Å–æ–±—ã—Ç–∏–π:

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ç–∏–ø–∞–º —Å–æ–±—ã—Ç–∏–π
- üîç –ü–æ–∏—Å–∫ –ø–æ –¥–µ–π—Å—Ç–≤–∏—è–º, –æ–ø–∏—Å–∞–Ω–∏—é, —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º, –º–æ–¥—É–ª—è–º
- üéØ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ:
  - –¢–∏–ø—É —Å–æ–±—ã—Ç–∏—è
  - –°–æ—Ç—Ä—É–¥–Ω–∏–∫—É
  - –î–∏–∞–ø–∞–∑–æ–Ω—É –¥–∞—Ç
- üìÖ –í—Ä–µ–º–µ–Ω–Ω–∞—è —à–∫–∞–ª–∞ —Å–æ–±—ã—Ç–∏–π —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
- üîΩ –†–∞—Å–∫—Ä—ã–≤–∞–µ–º—ã–µ –¥–µ—Ç–∞–ª–∏ –¥–ª—è —Å–æ–±—ã—Ç–∏–π —Å —á–µ–∫–∞–º–∏
- üñ®Ô∏è –ö–Ω–æ–ø–∫–∏ —ç–∫—Å–ø–æ—Ä—Ç–∞ –∏ –ø–µ—á–∞—Ç–∏

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ:**
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤ (–ø—Ä–æ–¥–∞–∂–∏)
- ‚úÖ –û–ø–µ—Ä–∞—Ü–∏–∏ —Å —á–µ–∫–∞–º–∏
- ‚úÖ –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (–æ–ø–ª–∞—Ç—ã –æ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤, –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–æ–≤
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫—É–ø–æ–∫

### 5. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ `App.tsx`

- –î–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ `journalEvents`
- –°–æ–±—ã—Ç–∏—è –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ü–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `JournalEventsView` –∫–∞–∫ `persistentEvents`

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π

–°–æ–±—ã—Ç–∏—è —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö:

1. **–ò–∑ –∑–∞–∫–∞–∑–æ–≤ (Orders):**
   - –°–æ–±—ã—Ç–∏–µ "–°–æ–∑–¥–∞–Ω –∑–∞–∫–∞–∑" (employee_action)
   - –°–æ–±—ã—Ç–∏–µ "–°–æ–∑–¥–∞–Ω —á–µ–∫" (receipt_operation)

2. **–ò–∑ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π (Transactions):**
   - "–û–ø–ª–∞—Ç–∞ –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞" (employee_action)
   - "–û–ø–ª–∞—Ç–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫—É" (employee_action)
   - "–í–æ–∑–≤—Ä–∞—Ç –∫–ª–∏–µ–Ω—Ç—É" (data_change)

3. **–ò–∑ —Ä–∞—Å—Ö–æ–¥–æ–≤ (Expenses):**
   - "–î–æ–±–∞–≤–ª–µ–Ω —Ä–∞—Å—Ö–æ–¥" (data_change)

4. **–ò–∑ –∑–∞–∫—É–ø–æ–∫ (Purchases):**
   - "–°–æ–∑–¥–∞–Ω–∞ –∑–∞–∫—É–ø–∫–∞" (employee_action)

### –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–≤–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ —Å–æ–±—ã—Ç–∏–π:
1. **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ** - –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∏–∑ —Ç–µ–∫—É—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö (orders, transactions, etc.)
2. **–ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–µ** - –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ Google Sheets (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –≤—Ä—É—á–Ω—É—é)

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Å–æ–±—ã—Ç–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∏–∑ –¥–∞–Ω–Ω—ã—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è, –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫).

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ—Å–º–æ—Ç—Ä –∂—É—Ä–Ω–∞–ª–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ä–∞–∑–¥–µ–ª **"–ñ—É—Ä–Ω–∞–ª"** –≤ –±–æ–∫–æ–≤–æ–º –º–µ–Ω—é
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∏–ª—å—Ç—Ä—ã –¥–ª—è –ø–æ–∏—Å–∫–∞ –Ω—É–∂–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π
3. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Å–æ–±—ã—Ç–∏–µ —Å –¥–µ—Ç–∞–ª—è–º–∏ —á–µ–∫–∞, —á—Ç–æ–±—ã —Ä–∞—Å–∫—Ä—ã—Ç—å –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π

–î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π –≤ –±—É–¥—É—â–µ–º:

```typescript
const customEvent: JournalEvent = {
  id: `EVENT-CUSTOM-${Date.now()}`,
  date: new Date().toISOString(),
  type: 'system_event',
  employeeName: currentUser.name,
  employeeEmail: currentUser.email,
  action: '–ò–∑–º–µ–Ω–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏',
  description: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–∑–º–µ–Ω–∏–ª –∫—É—Ä—Å –≤–∞–ª—é—Ç—ã',
  module: 'settings'
};

await sheetsService.addJournalEvent(accessToken, customEvent);
```

## –¶–≤–µ—Ç–æ–≤–∞—è –∫–æ–¥–∏—Ä–æ–≤–∫–∞

- üü£ **–§–∏–æ–ª–µ—Ç–æ–≤—ã–π** - –î–µ–π—Å—Ç–≤–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
- üîµ **–ì–æ–ª—É–±–æ–π** - –û–ø–µ—Ä–∞—Ü–∏–∏ —Å —á–µ–∫–∞–º–∏
- üî∑ **–°–∏–Ω–∏–π** - –°–∏—Å—Ç–µ–º–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
- üü° **–Ø–Ω—Ç–∞—Ä–Ω—ã–π** - –ò–∑–º–µ–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

## –ò–∫–æ–Ω–∫–∏ –º–æ–¥—É–ª–µ–π

- üõí **Sales** - –ü—Ä–æ–¥–∞–∂–∏ (–∑–µ–ª–µ–Ω—ã–π)
- üì¶ **Inventory** - –°–∫–ª–∞–¥ (—Å–∏–Ω–∏–π)
- üè¢ **Procurement** - –ó–∞–∫—É–ø (—è–Ω—Ç–∞—Ä–Ω—ã–π)
- üí∞ **Finance** - –§–∏–Ω–∞–Ω—Å—ã (—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π)
- üë• **CRM** - –ö–ª–∏–µ–Ω—Ç—ã (–≥–æ–ª—É–±–æ–π)

## –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

–í–æ–∑–º–æ–∂–Ω—ã–µ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è:
- –≠–∫—Å–ø–æ—Ä—Ç –≤ CSV/Excel
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏—è—Ö
- –ê—É–¥–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–∞–Ω–Ω—ã—Ö (–¥–æ/–ø–æ—Å–ª–µ)
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ IP-–∞–¥—Ä–µ—Å—É
- –ì—Ä–∞—Ñ–∏–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
